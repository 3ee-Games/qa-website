<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="description" content="3Games website" />
	<link rel="icon" href="/favicon.png" />
	<link href="https://fonts.googleapis.com/css?family=Merriweather|Muli:300" rel="stylesheet">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="content-security-policy" content=""><title>3Games Blog - Phaser game with a React UI</title><meta property="og:title" content="Phaser game with a React UI" data-svelte="svelte-kfjku2">
	<link rel="stylesheet" href="/_app/immutable/assets/pages/__layout.svelte-65638265.css">
	<link rel="stylesheet" href="/_app/immutable/assets/_post-5f80a8dd.css">
	<link rel="modulepreload" href="/_app/immutable/start-23846ddb.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/index-b0e60546.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/index-f2a0ff0f.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/paths-396f020f.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/singletons-d1fb5791.js">
	<link rel="modulepreload" href="/_app/immutable/pages/__layout.svelte-31e5ba54.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/menuContextStore-a8cf7f4c.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/accountStore-fb474891.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/MediaQuery-134e8197.js">
	<link rel="modulepreload" href="/_app/immutable/pages/blog/phaser-game-react-ui.md-d22b2d1e.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/_post-2e94fe7e.js">
</head>

<body>
	<div id="svelte">


<header class="svelte-1iags3l"><div class="corner svelte-1iags3l"><div class="logo svelte-1iags3l"><a href="/" class="svelte-1iags3l"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 122.237 102.658" class="svelte-17ukrba"><defs><clipPath id="logo-path"><ellipse cx="106.822" cy="119.364" fill="none" stroke="#c43b37" stroke-width=".825" rx="49.117" ry="39.162"></ellipse></clipPath></defs><ellipse cx="61.051" cy="51.291" fill="#3899ed" stroke="#000" stroke-width="2.628" rx="59.737" ry="49.977"></ellipse><g clip-path="url(#logo-path)" transform="translate(-74.872 -99.587) scale(1.26422)"><ellipse cx="107.576" cy="119.667" rx="26.46" ry="25.524"></ellipse><path d="M77.486 89.412 65.352 77.278l14.94-.163c42.264-.462 61.806-.685 65.178-.743l3.732-.065-12.144 12.145-12.143 12.144-.543-.409c-5.324-4.013-12.023-6.001-18.474-5.483-3.756.302-6.754 1.11-9.997 2.696-2.075 1.014-3.781 2.098-5.245 3.33-.532.449-.983.816-1.002.816-.02 0-5.495-5.46-12.168-12.134zm-.1 60.876L65.352 162.52l14.94.042c42.267.118 61.81.182 65.182.213l3.732.034-12.242-12.045-12.242-12.045-.538.413c-5.292 4.056-11.975 6.099-18.43 5.633-3.758-.272-6.762-1.055-10.019-2.614-2.082-.997-3.797-2.067-5.27-3.288-.536-.444-.99-.808-1.01-.808-.019 0-5.45 5.505-12.069 12.233z"></path></g><ellipse cx="73.834" cy="40.787" fill="#fff" rx="6.69" ry="6.212"></ellipse></svg></a></div></div>

	<nav class="svelte-1iags3l"><a href="/" class="svelte-1iags3l"><img alt="3 Games 3D text logo" src="/logo-txt-glow.png" class="logo-txt svelte-1iags3l"></a>
		<ul class="svelte-1iags3l"><li class="home svelte-1iags3l"><a sveltekit:prefetch href="/" class="svelte-1iags3l">home</a></li>
			<li class="svelte-1iags3l"><a sveltekit:prefetch href="/about" class="svelte-1iags3l">about</a></li>
			<li class="svelte-1iags3l"><a sveltekit:prefetch href="/games" class="svelte-1iags3l">games</a></li>
			<li class="svelte-1iags3l"><a sveltekit:prefetch href="/blog" class="svelte-1iags3l">blog</a></li>
			<li class="svelte-1iags3l"><a sveltekit:prefetch href="/contact" class="svelte-1iags3l">contact</a></li></ul></nav>

	<div class="corner svelte-1iags3l"><nav class="account svelte-1iags3l"><ul class="svelte-1iags3l"><li class="svelte-1iags3l"><a sveltekit:prefetch href="/account/create" class="svelte-1iags3l">sign up</a></li>
					<li class="svelte-1iags3l"><a sveltekit:prefetch href="/account/login" class="svelte-1iags3l">login</a></li></ul></nav></div>

	
</header>

<main class="svelte-jq7k3t">

<section class="background"><article class="blog content"><h1 class="svelte-169z50">Phaser game with a React UI</h1>
		<aside class="date-aside svelte-169z50"><ul class="svelte-169z50"><li class="published-date svelte-169z50"><strong>Published:</strong> Wednesday, Jun 10, 2020, 8:00 PM</li>
				<li class="published-date svelte-169z50"><strong>Modified:</strong> Sunday, May 29, 2022, 8:00 PM</li></ul></aside>

		<aside class="categories svelte-169z50"><ul class="svelte-169z50"><li class="svelte-169z50"><a href="/blog/categories/phaser" class="svelte-169z50">Phaser</a>
						</li><li class="svelte-169z50"><a href="/blog/categories/react" class="svelte-169z50">React</a>
						</li><li class="svelte-169z50"><a href="/blog/categories/game development" class="svelte-169z50">Game development</a>
						</li></ul></aside>

		<div class="video-container svelte-nh3in4"><iframe title="Video Player" id="ytplayer" type="text/html" width="100%" height="600" src="https://www.youtube.com/embed/EDbW7lbtHOA" frameborder="0" class="svelte-nh3in4"></iframe></div>
		<div class="article"><p>In this video, we show developing a game with Phaser and using React for the user interface. Using React to alleviate the burden of handling the UI in Canvas. RequestAnimationFrame can be expensive and should be used for the game only. The canvas game shouldn’t be wasting valuable updates for the UI.</p>
<p>The game we’re developing is using Next.js (a React framework) and Phaser (javascript game engine). Next.js compiles a static html version of the game that can be used iOS/Android webview for mobile, NW.js/Electron for desktop (similar to what Discord does).</p>
<p>The game is a NextJS application that from there, it builds the Phaser game and game starts up normally. However, the Nextjs application is handling the UI elements like in the video: merchant dialog, player bag, player armory, and other dialogs like the death dialog.</p>
<blockquote><p>This is a similar approach to older console games that used Scaleform - which under the hood was using Flash and overlaying the UI created by a Flash developer. From there, Scaleform would sit on top of the c++ game engine.</p></blockquote>
<h2 id="writing-the-bridge-between-canvas-and-react"><a aria-hidden="true" tabindex="-1" href="#writing-the-bridge-between-canvas-and-react"><span class="icon icon-link"></span></a>Writing the bridge between Canvas and React</h2>
<p>For the bridge to work between Phaser and React, use an event listener: </p>
<ul><li>addEventListener on the document object to send objects back and forth. </li>
<li>The implementation of addEventListener is contained within a hook that implements an Effect Hook: useEffect so that state can be passed in.</li></ul>
<p>The performance issue that was solved here was to convert the class components (Bag, Armory, DeathDialog, MerchantDialog) to functional components and then use hooks to manage the add/remove listeners.</p>
<p><strong>Types of Hooks </strong></p>
<ul><li><strong>State Hooks: </strong> useState - called inside a function component to add some local state.  (example: a counter)</li>
<li><strong>Effect Hooks: </strong> useEffect - perform side effects from a function component. (example: listening to an event fire from the DOM)</li>
<li><strong>Context Hooks: </strong> useContext - subscribe to React context without introducing nesting.  (example: Dark &amp; Light themes)</li>
<li><strong>Reducer Hooks: </strong> useReducer - And useReducer lets you manage local state of complex components with a reducer.  (dealing with complex state logic)</li></ul>
<p><strong>Rules of using Hooks </strong></p>
<p>Take the time to learn hooks and using functional components.</p>
<ul><li>Call Hooks at top level only: Only call Hooks at the top level. Don’t call Hooks inside loops, conditions, or nested functions.</li>
<li>Functional Components only: Only call Hooks from React function components. Don’t call Hooks from regular JavaScript functions. (See Custom Hooks.)</li></ul>
<p>If you are using class components, do not worry - porting class components to functional components is trivial.  Simply follow the <a href="https://reactjs.org/tutorial/tutorial.html#function-components" rel="nofollow">pattern of functional components</a> when porting classes.</p>
<blockquote><p>Pay close attention to useState when rewriting your new functional components. Once you spend time writing functional components, we find you’ll enjoy using them and paired with hooks makes the component design simple to implement and iterate on the design of the interface.</p></blockquote>
<h2 id="a-simple-example"><a aria-hidden="true" tabindex="-1" href="#a-simple-example"><span class="icon icon-link"></span></a>A Simple Example</h2>
<p>Below is a bare bones example of a using a Hook and implementing useEffect to attach events with addEventListener.  Use this example to experiment with different types of hooks.</p>
<iframe height="500" style="width: 100%;" scrolling="no" title="React Hooks - useMousePosition" src="https://codepen.io/halvves/embed/preview/qQxPNo?default-tab=js%2Cresult&editable=true&theme-id=dark" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">See the Pen <a href="https://codepen.io/halvves/pen/qQxPNo">Code Pen</a>
		by halvves (<a href="https://codepen.io/halvves">@halvves</a>) on
		<a href="https://codepen.io">CodePen</a>.
	</iframe>
<h2 id="have-a-solid-understanding-of-hooks"><a aria-hidden="true" tabindex="-1" href="#have-a-solid-understanding-of-hooks"><span class="icon icon-link"></span></a>Have a solid understanding of Hooks</h2>
<p>Taking the time to understand hooks and why we are using them is the first important building block to building the bridge between the game engine and UI. Pick the areas that you need side effects - the Effect Hook, which allows for data fetching, DOM updates, and for our example for the bridge: we use addEventListener within useEffect.  In the callback for useEffect, pass in removeEventListener to clean up that instance of the event listener.</p>
<h2 id="resources-and-frameworks"><a aria-hidden="true" tabindex="-1" href="#resources-and-frameworks"><span class="icon icon-link"></span></a>Resources and frameworks</h2>
<p>Here’s all the resources and frameworks used in the video:</p>
<ul><li><a href="https://www.youtube.com/watch?v=EDbW7lbtHOA" rel="nofollow">Phaser with a React UI Youtube video</a></li>
<li><a href="https://phaser.io/" rel="nofollow">Phaser JS - HTML5 game engine</a></li>
<li><a href="https://nextjs.org/" rel="nofollow">Next.js</a></li>
<li><a href="https://reactjs.org/" rel="nofollow">React</a></li>
<li><a href="https://reactjs.org/docs/hooks-overview.html#state-hook" rel="nofollow">Hooks at a glance</a></li></ul></div></article>
</section></main>

<footer class="svelte-1pv61cd"><div class="footer-container svelte-1pv61cd"><div class="footer-main svelte-1pv61cd"><div class="brand svelte-1pv61cd"><div class="footer-logo footer-logo-animation svelte-1pv61cd"><svg viewBox="0 0 30 17" class="svelte-1pv61cd"><g><g aria-label="3EE" font-size="16.383" stroke-width=".41"><path class="three-ee-text-logo svelte-1pv61cd" d="M7.077 3.584H3.649v1.132H.91V3.258q0-.583.063-1.08.078-.498.313-.84.235-.343.688-.532Q2.444.6 3.242.6h.063L7.42.566h.063q.36 0 .72.051.36.035.751.309.423.309.61.703.189.377.235.875.047.497.047.96 0 .223-.015.446v.411q-.016.223-.016.446v.463q0 .463-.11.789-.093.326-.36.617.267.274.36.617.11.326.11.79v2.417q0 .446-.156.823-.141.36-.407.652-.25.274-.61.428-.345.155-.736.155H2.788q-.391 0-.735-.155-.345-.154-.595-.428-.25-.292-.407-.652-.14-.377-.14-.823V8.402h2.738v1.132h3.428v-1.68H2.961V4.853h4.116zM19.205 9.568v3.001h-8.39V.566h8.39V3.55h-5.65v1.526h4.633v2.983h-4.633v1.51zM28.499 9.568v3.001h-8.39V.566h8.39V3.55h-5.65v1.526h4.632v2.983h-4.633v1.51z"></path></g><g aria-label="Third Eye Entertainment" font-size="2.117" stroke-width=".265"><path class="three-ee-unwrapped-text svelte-1pv61cd" d="M2.237 13.958v.368H1.82v1.113h-.37v-1.113h-.417v-.368zM3.555 13.954v1.481h-.368v-.556H2.72v.556h-.368v-1.481h.368v.556h.466v-.556zM4.068 13.958v1.481h-.37v-1.481zM5.35 14.356v.05l.002.05v.042l.002.038-.002.093-.006.093q-.009.061-.036.106-.025.042-.076.078-.034.023-.066.032-.03.006-.063.008l.273.49h-.422l-.27-.488h-.144v.487h-.37v-1.481h.91q.056 0 .105.02.049.02.085.058.036.036.057.087.021.048.021.105zm-.375.224v-.256h-.433v.256zM6.479 13.964q.07.021.108.053.038.03.055.068.017.038.021.082.004.045.004.093v.026q.002.01.002.023.003.03.003.07v.692q0 .06-.003.112-.002.053-.02.098-.02.044-.062.08-.04.036-.117.061-.019.005-.074.009l-.116.004h-.812v-1.481h.535q.046-.003.095-.003h.068q.055 0 .116.003.064 0 .119.004.057.002.076.006zM6.3 15.067v-.743h-.463v.743zM8.756 15.069v.37H7.62v-1.481h1.135v.368H7.99v.188h.627v.369h-.627v.186zM10.222 13.956l-.531.842v.64h-.369v-.64l-.533-.842h.436l.281.442.28-.442zM11.401 15.069v.37h-1.134v-1.481H11.4v.368h-.764v.188h.627v.369h-.627v.186zM13.477 15.069v.37h-1.135v-1.481h1.135v.368h-.764v.188h.626v.369h-.626v.186zM14.814 13.96v1.482h-.347l-.487-.762v.762h-.368V13.96h.347l.487.76v-.76zM16.136 13.958v.368h-.417v1.113h-.37v-1.113h-.417v-.368zM17.367 15.069v.37h-1.135v-1.481h1.135v.368h-.764v.188h.626v.369h-.626v.186zM18.67 14.356v.05l.002.05v.042l.002.038-.002.093-.006.093q-.008.061-.036.106-.025.042-.076.078-.034.023-.066.032-.03.006-.063.008l.273.49h-.421l-.271-.488h-.144v.487h-.37v-1.481h.91q.057 0 .105.02.049.02.085.058.036.036.057.087.021.048.021.105zm-.374.224v-.256h-.434v.256zM19.964 13.958v.368h-.417v1.113h-.37v-1.113h-.417v-.368zM20.903 13.954l.538 1.481h-.396l-.1-.277h-.45l-.1.277h-.394l.538-1.481zm-.093.834q-.013-.034-.021-.06l-.02-.053q-.008-.027-.02-.057l-.028-.076-.091.246zM21.87 13.958v1.481h-.37v-1.481zM23.186 13.96v1.482h-.348l-.486-.762v.762h-.369V13.96h.347l.487.76v-.76zM24.755 13.956v1.481h-.37v-.74l-.104.165-.097.158h-.271l-.201-.326v.743h-.37v-1.481h.35l.356.578.358-.578zM26.04 15.069v.37h-1.134v-1.481h1.134v.368h-.764v.188h.627v.369h-.627v.186zM27.377 13.96v1.482h-.347l-.486-.762v.762h-.369V13.96h.347l.487.76v-.76zM28.7 13.958v.368h-.417v1.113h-.37v-1.113h-.418v-.368z"></path></g></g></svg></div>
				<p class="legal svelte-1pv61cd">© Copyright 1997 - 2021 3Games LLC. All rights reserved.</p>
				<p class="legal svelte-1pv61cd">Made with a giant barrel of <ion-icon class="heart-icon svelte-1pv61cd" name="heart-sharp"></ion-icon> by 3Games.
				</p>
				<p class="legal svelte-1pv61cd">In memory of Teela 🐱</p></div>
			<div class="footer-routes svelte-1pv61cd"><div class="footer-category svelte-1pv61cd"><div class="footer-heading svelte-1pv61cd"><ion-icon class="footer-heading-icon svelte-1pv61cd" name="planet-sharp"></ion-icon>
						<h6 class="svelte-1pv61cd">discover</h6></div>
					<a href="/about" aria-current="page" class="svelte-1pv61cd">about</a>
					<a href="/games" aria-current="page" class="svelte-1pv61cd">games</a>
					<a href="/blog" aria-current="page" class="svelte-1pv61cd">blog</a>
					<a href="https://discord.gg/3ee" target="_blank" class="svelte-1pv61cd">discord community</a>
					<a href="/contact" aria-current="page" class="svelte-1pv61cd">contact</a></div>
				<div class="footer-category svelte-1pv61cd"><div class="footer-heading svelte-1pv61cd"><ion-icon class="footer-heading-icon svelte-1pv61cd" name="person-circle-sharp"></ion-icon>
						<h6 class="svelte-1pv61cd">account</h6></div>

					<a href="/account/login" aria-current="page" class="svelte-1pv61cd">login</a>
					<a href="/account/create" aria-current="page" class="svelte-1pv61cd">create an account</a>
					<a href="/account/accessibility" aria-current="page" class="svelte-1pv61cd">accessibility</a>
					<a href="/account/conduct" aria-current="page" class="svelte-1pv61cd">code of conduct</a>
					<a href="/account/privacy" aria-current="page" class="svelte-1pv61cd">privacy policy</a>
					<a href="/account/terms" aria-current="page" class="svelte-1pv61cd">terms of service</a></div>
				<div class="footer-category svelte-1pv61cd"><div class="footer-heading svelte-1pv61cd"><ion-icon class="footer-heading-icon svelte-1pv61cd" name="chatbubbles-sharp"></ion-icon>
						<h6 class="svelte-1pv61cd">social</h6></div>

					<a href="https://github.com/3ee-Games" target="_blank" class="svelte-1pv61cd">github</a>
					<a href="https://www.youtube.com/channel/UCv-Cy54zRQgGHe5kiqpfOGA" target="_blank" class="svelte-1pv61cd">youtube</a>
					<a href="https://twitter.com/3ee_Games" target="_blank" class="svelte-1pv61cd">twitter</a>
					<a href="https://www.linkedin.com/company/3ee-games" target="_blank" class="svelte-1pv61cd">linkedin</a>
					<a href="https://www.facebook.com/3eecom" target="_blank" class="svelte-1pv61cd">facebook</a></div></div></div></div></footer>




		<script type="module" data-sveltekit-hydrate="xq7w0z">
		import { start } from "/_app/immutable/start-23846ddb.js";
		start({
			target: document.querySelector('[data-sveltekit-hydrate="xq7w0z"]').parentNode,
			paths: {"base":"","assets":""},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				nodes: [0, 20],
				params: {},
				routeId: "blog/phaser-game-react-ui"
			}
		});
	</script></div>
</body>

<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

</html>